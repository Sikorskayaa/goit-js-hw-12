{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export function createMarkup(arr) {\n    return arr.map( ({ downloads,webformatURL, largeImageURL, tags, likes, views, comments} ) => `\n    <a class=\"gallery-link\" href=\"${largeImageURL}\">\n    <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\"/>\n    <div class=\"gallery-list\">\n    <div class=\"gallery-item\"><b>Likes</b> <span>${likes}</span></div>\n    <div class=\"gallery-item\"><b>Views</b> <span>${views}</span></div>\n    <div class=\"gallery-item\"><b>Comments</b> <span>${comments}</span></div>\n    <div class=\"gallery-item\"><b>Downloads</b> <span>${downloads}</span></div>\n    </div></a>\n      `).join('')\n}","import axios from 'axios';\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n// import { request } from \"./js/pixabi-api\";\nimport { createMarkup } from \"./js/render-functions\";\n\nconst form = document.querySelector('.submit-form');\nconst list = document.querySelector('.gallery');\nconst loadBtn = document.querySelector('.js-load-btn')\nconst loading = document.querySelector('.js-loading')\n\nform.addEventListener('submit', onSubmit);\nloadBtn.addEventListener('click', onLoad)\n\nlet inputValue;\nlet currentPage = 1;\nlet perPage = 20;\n\nfunction onLoad() { \n    currentPage += 1;\n    request(inputValue)\n      .then(data => {\n              list.insertAdjacentHTML(`beforeend`,createMarkup(data.hits))\n              init();\n              const card = document.querySelector(`.gallery-item`).getBoundingClientRect().height;\n        window.scrollBy(\n          {\n                  top: card * 2,\n                  behavior: `smooth`\n          });\n                    })\n          .catch(err => console.log(err))\n     \n  }\n\nfunction onSubmit(evt) {\n    evt.preventDefault();\n    \n    loading.innerHTML = `<span class=\"loader\"></span>`;\n    if (evt.currentTarget.elements.search.value !== inputValue) {\n        list.innerHTML = ``;\n        currentPage = 1;\n      }\n      inputValue = evt.currentTarget.elements.search.value;\n\n    if(inputValue.length === 0){\n        return\n    }\n\n    request(inputValue)\n        .then(data => {\n            if (data.hits.length === 0){\n                 iziToast.show({\n                    message: ' Sorry, there are no images matching your search query. Please try again!',\n                    color: '#EF4040',\n                    position: 'topRight',\n                    messageColor: 'white',\n                    messageSize: '5px',\n                    timeout: 2000,\n                    padding: '20px',\n                    gap: '8px',\n                    borderRadius: '4px'\n                 });\n                loading.innerHTML = ``;\n                loadBtn.classList.add(`search-btn-hidden`);\n                return;\n            }\n            loading.innerHTML = ``;\n      list.insertAdjacentHTML(`beforeend`,createMarkup(data.hits))\n            init();\n            if (currentPage === 1) {\n                loadBtn.classList.remove(`search-btn-hidden`);\n              }\n              if (currentPage > data.totalHits / perPage) {\n                loadBtn.classList.add(`search-btn-hidden`);\n                iziToast.show(\n                {\n                  message: \"We're sorry, but you've reached the end of search results.\"\n                }\n                );\n              }\n        })\n        .catch(err => console.log(err))\n    \n}\n\n\n\nexport async function request(inputValue) {\n    const BASE_URL = 'https://pixabay.com/api/';\n    const API_KEY = '43859237-c6386bdcccc66f068a9509366'\n\n    const resp = await axios.get(`${BASE_URL}?key=${API_KEY}&q=${inputValue}&image_type=photo&orientation=horizontal&safesearch=true&per_page=${perPage}&page=${currentPage}`)\n\n     return resp.data\n \n}\n\n\n\nfunction init() {\n    const instance = new SimpleLightbox('.gallery a', {\n        captionsDelay: 250,\n        captionPosition: \"bottom\",\n    });\n    instance.refresh();\n}"],"names":["createMarkup","arr","downloads","webformatURL","largeImageURL","tags","likes","views","comments","form","list","loadBtn","loading","onSubmit","onLoad","inputValue","currentPage","perPage","request","data","init","card","err","evt","iziToast","BASE_URL","API_KEY","axios","SimpleLightbox"],"mappings":"owBAAO,SAASA,EAAaC,EAAK,CAC9B,OAAOA,EAAI,IAAK,CAAC,CAAE,UAAAC,EAAU,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,CAAQ,IAAO;AAAA,oCAC7DJ,CAAa;AAAA,sCACXD,CAAY,UAAUE,CAAI;AAAA;AAAA,mDAEbC,CAAK;AAAA,mDACLC,CAAK;AAAA,sDACFC,CAAQ;AAAA,uDACPN,CAAS;AAAA;AAAA,OAEzD,EAAE,KAAK,EAAE,CAChB,CCFA,MAAMO,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAO,SAAS,cAAc,UAAU,EACxCC,EAAU,SAAS,cAAc,cAAc,EAC/CC,EAAU,SAAS,cAAc,aAAa,EAEpDH,EAAK,iBAAiB,SAAUI,CAAQ,EACxCF,EAAQ,iBAAiB,QAASG,CAAM,EAExC,IAAIC,EACAC,EAAc,EACdC,EAAU,GAEd,SAASH,GAAS,CACdE,GAAe,EACfE,EAAQH,CAAU,EACf,KAAKI,GAAQ,CACNT,EAAK,mBAAmB,YAAYV,EAAamB,EAAK,IAAI,CAAC,EAC3DC,IACA,MAAMC,EAAO,SAAS,cAAc,eAAe,EAAE,sBAAuB,EAAC,OACnF,OAAO,SACL,CACQ,IAAKA,EAAO,EACZ,SAAU,QAC5B,CAAW,CACX,CAAqB,EACV,MAAMC,GAAO,QAAQ,IAAIA,CAAG,CAAC,CAErC,CAEH,SAAST,EAASU,EAAK,CACnBA,EAAI,eAAc,EAElBX,EAAQ,UAAY,+BAChBW,EAAI,cAAc,SAAS,OAAO,QAAUR,IAC5CL,EAAK,UAAY,GACjBM,EAAc,GAEhBD,EAAaQ,EAAI,cAAc,SAAS,OAAO,MAE9CR,EAAW,SAAW,GAIzBG,EAAQH,CAAU,EACb,KAAKI,GAAQ,CACV,GAAIA,EAAK,KAAK,SAAW,EAAE,CACtBK,EAAS,KAAK,CACX,QAAS,4EACT,MAAO,UACP,SAAU,WACV,aAAc,QACd,YAAa,MACb,QAAS,IACT,QAAS,OACT,IAAK,MACL,aAAc,KAClC,CAAkB,EACFZ,EAAQ,UAAY,GACpBD,EAAQ,UAAU,IAAI,mBAAmB,EACzC,MACH,CACDC,EAAQ,UAAY,GAC1BF,EAAK,mBAAmB,YAAYV,EAAamB,EAAK,IAAI,CAAC,EACrDC,IACIJ,IAAgB,GAChBL,EAAQ,UAAU,OAAO,mBAAmB,EAE1CK,EAAcG,EAAK,UAAYF,IACjCN,EAAQ,UAAU,IAAI,mBAAmB,EACzCa,EAAS,KACT,CACE,QAAS,4DACV,CACjB,EAEA,CAAS,EACA,MAAMF,GAAO,QAAQ,IAAIA,CAAG,CAAC,CAEtC,CAIO,eAAeJ,EAAQH,EAAY,CACtC,MAAMU,EAAW,2BACXC,EAAU,qCAIf,OAFY,MAAMC,EAAM,IAAI,GAAGF,CAAQ,QAAQC,CAAO,MAAMX,CAAU,qEAAqEE,CAAO,SAASD,CAAW,EAAE,GAE5J,IAEjB,CAIA,SAASI,GAAO,CACK,IAAIQ,EAAe,aAAc,CAC9C,cAAe,IACf,gBAAiB,QACzB,CAAK,EACQ,QAAO,CACpB"}